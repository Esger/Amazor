define("app",["exports","aurelia-framework","aurelia-event-aggregator","jquery"],function(e,n,t,r){"use strict";function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.App=void 0;var o,i,s=function(e){return e&&e.__esModule?e:{default:e}}(r);e.App=(o=(0,n.inject)(t.EventAggregator))(i=function(){function e(n){var t=this;a(this,e),this.handleKeyInput=function(e){switch(e.keyCode||e.which){case t.keys.left:t.ea.publish("keyPressed","left");break;case t.keys.up:t.ea.publish("keyPressed","up");break;case t.keys.right:t.ea.publish("keyPressed","right");break;case t.keys.down:t.ea.publish("keyPressed","down");break;default:t.ea.publish("keyPressed","somekey")}},this.ea=n,this.keys={left:37,up:38,right:39,down:40}}return e.prototype.activate=function(){var e=this;(0,s.default)("body");document.addEventListener("keydown",e.handleKeyInput,!0)},e}())||i}),define("environment",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={debug:!1,testing:!1}}),define("main",["exports","./environment"],function(e,n){"use strict";function t(e){e.use.standardConfiguration().feature("resources"),r.default.debug&&e.use.developmentLogging(),r.default.testing&&e.use.plugin("aurelia-testing"),e.start().then(function(){return e.setRoot()})}Object.defineProperty(e,"__esModule",{value:!0}),e.configure=t;var r=function(e){return e&&e.__esModule?e:{default:e}}(n);Promise.config({longStackTraces:r.default.debug,warnings:{wForgottenReturn:!1}})}),define("components/board",["exports","aurelia-framework","aurelia-event-aggregator"],function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.BoardCustomElement=void 0;var a,o;e.BoardCustomElement=(a=(0,n.inject)(t.EventAggregator))(o=function(){function e(n){var t=this;r(this,e),this.ea=n,this.gamePosition={},this.scale=1,this.scale=1,this.ea.subscribe("scaleChange",function(e){t.scale=e>1?1:e}),this.ea.subscribe("centerChange",function(e){t.moveMaze(e)}),this.ea.subscribe("restart",function(e){t.resetBoard()})}return e.prototype.handleTouch=function(e){var n,t,r=$(this.board),a=r.height();if(e.layerX)n=e.layerX,t=e.layerY;else{var o=r.offset(),i=e.touches[0];n=i.pageX-o.left,t=i.pageY-o.top}var s="undefined";s=t<=n?t<=a-n?"up":"right":t<=a-n?"left":"down",this.ea.publish("keyPressed",s)},e.prototype.moveMaze=function(e){var n=128*this.scale,t=80-n,r=40-e.centerX*this.scale*6.4,a=40-e.centerY*this.scale*6.4;this.gamePosition.x=Math.max(Math.min(r,0),t),this.gamePosition.y=Math.max(Math.min(a,0),t)},e.prototype.resetBoard=function(){this.gamePosition={x:-3,y:-3},this.scale=1},e.prototype.attached=function(){this.resetBoard()},e}())||o}),define("components/maze",["exports","aurelia-framework","aurelia-event-aggregator"],function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.MazeCustomElement=void 0;var a,o;e.MazeCustomElement=(a=(0,n.inject)(t.EventAggregator))(o=function(){function e(n){var t=this;r(this,e),this.ea=n,this.ea.subscribe("checkWall",function(e){t.hasWall(e)||t.ea.publish("movePlayer",e)}),this.ea.subscribe("restart",function(e){t.makeNewMaze()}),this.cells=[],this.width=20,this.height=20}return e.prototype.hasWall=function(e){var n={left:3,right:1,up:0,down:2};if(n.hasOwnProperty(e.direction))return 1==this.cells[e.player.y][e.player.x][n[e.direction]]},e.prototype.wallClass=function(e){return"wall"+e.join("")},e.prototype.makeNewMaze=function(){this.cells=this.newMaze(this.width,this.height)},e.prototype.newMaze=function(e,n){for(var t=e*n,r=new Array,a=new Array,o=0;o<n;o++){r[o]=new Array,a[o]=new Array;for(var i=0;i<e;i++)r[o][i]=[1,1,1,1],a[o][i]=!0}var s=[Math.floor(Math.random()*n),Math.floor(Math.random()*e)],l=[s];a[s[0]][s[1]]=!1;for(var c=1;c<t;){for(var p=[[s[0]-1,s[1],0,2],[s[0],s[1]+1,1,3],[s[0]+1,s[1],2,0],[s[0],s[1]-1,3,1]],u=new Array,d=0;d<4;d++)p[d][0]>-1&&p[d][0]<n&&p[d][1]>-1&&p[d][1]<e&&a[p[d][0]][p[d][1]]&&u.push(p[d]);if(u.length){var h=u[Math.floor(Math.random()*u.length)];r[s[0]][s[1]][h[2]]=0,r[h[0]][h[1]][h[3]]=0,a[h[0]][h[1]]=!1,c++,s=[h[0],h[1]],l.push(s)}else s=l.pop()}return r},e.prototype.attached=function(){this.makeNewMaze()},e}())||o}),define("components/players",["exports","aurelia-framework","aurelia-event-aggregator"],function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.PlayersCustomElement=void 0;var a,o;e.PlayersCustomElement=(a=(0,n.inject)(t.EventAggregator))(o=function(){function e(n){var t=this;r(this,e),this.ea=n,this.ea.subscribe("keyPressed",function(e){for(var n=0;n<t.players.length;n++)t.ea.publish("checkWall",{direction:e,player:t.players[n]})}),this.ea.subscribe("movePlayer",function(e){t.movePlayer(e),t.areTogether()&&t.ea.publish("allTogether"),t.adjustScale()}),this.ea.subscribe("restart",function(e){t.resetPlayers()}),this.players=[]}return e.prototype.resetPlayers=function(){this.players=[{name:"black",step:!1,angle:0,x:5,y:5},{name:"white",step:!1,angle:0,x:13,y:13}],this.adjustScale()},e.prototype.adjustScale=function(){var e=Math.min.apply(Math,this.players.map(function(e){return e.x})),n=Math.max.apply(Math,this.players.map(function(e){return e.x})),t=Math.min.apply(Math,this.players.map(function(e){return e.y})),r=Math.max.apply(Math,this.players.map(function(e){return e.y})),a={top:0,right:0,bottom:0,left:0,width:0,height:0,centerX:0,centerY:0,size:0};a.top=Math.max(t-3,0),a.right=Math.min(n+3+1,20),a.bottom=Math.min(r+3+1,20),a.left=Math.max(e-3,0),a.width=a.right-a.left,a.height=a.bottom-a.top,a.size=Math.max(a.width,a.height);var o=Math.min(12.5/a.size,1);a.centerX=(a.right+a.left)/2,a.centerY=(a.bottom+a.top)/2,this.ea.publish("scaleChange",o),this.ea.publish("centerChange",a)},e.prototype.areTogether=function(){for(var e=this.players[0],n=1;n<this.players.length;n++){if(this.players[n].x!==e.x)return!1;if(this.players[n].y!==e.y)return!1}return!0},e.prototype.movePlayer=function(e){var n=this,t={up:[0,-1],right:[1,0],down:[0,1],left:[-1,0]},r={up:-90,right:0,down:90,left:180};t.hasOwnProperty(e.direction)&&function(t){"black"==e.player.name?(n.players[0].x+=t[0],n.players[0].y+=t[1],n.players[0].step=!n.players[0].step,n.players[0].angle=r[e.direction]):(n.players[1].x+=t[0],n.players[1].y+=t[1],n.players[1].step=!n.players[1].step,n.players[1].angle=r[e.direction])}(t[e.direction])},e.prototype.attached=function(){this.resetPlayers(),this.adjustScale()},e}())||o}),define("components/win",["exports","aurelia-framework","aurelia-event-aggregator"],function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.WinCustomElement=void 0;var a,o;e.WinCustomElement=(a=(0,n.inject)(t.EventAggregator))(o=function(){function e(n){var t=this;r(this,e),this.ea=n,this.showWin=!1,this.ea.subscribe("allTogether",function(e){t.showWin=!0})}return e.prototype.restart=function(){this.ea.publish("restart"),this.showWin=!1},e}())||o}),define("resources/index",["exports"],function(e){"use strict";function n(e){}Object.defineProperty(e,"__esModule",{value:!0}),e.configure=n}),define("resources/binding-behaviors/keystrokes",["exports"],function(e){"use strict";function n(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});e.Keystrokes=function(){function e(){n(this,e),this.myKeypressCallback=this.keypressInput.bind(this)}return e.prototype.activate=function(){window.addEventListener("keypress",this.myKeypressCallback,!1)},e.prototype.deactivate=function(){window.removeEventListener("keypress",this.myKeypressCallback)},e.prototype.keypressInput=function(e){},e}()}),define("text!app.html",["module"],function(e){e.exports='<template>\n    <require from="reset.css"></require>\n    <require from="app.css"></require>\n    <require from="components/board"></require>\n    <h1>Repair the pair</h1>\n    <board></board>\n</template>'}),define("text!app.css",["module"],function(e){e.exports='* {\n    margin        : 0;\n    border        : 0;\n    padding       : 0;\n    pointer-events: none;\n}\n\nbody, html {\n    height          : 100vh;\n    width           : 100vw;\n    overflow        : hidden;\n    display         : flex;\n    flex-direction  : column;\n    align-items     : center;\n    justify-content : center;\n    background-color: #E3B32D;\n}\n\nbody {\n    -webkit-overflow-scrolling: touch;\n}\n\nh1 {\n    font-family   : "Cabin Sketch", sans-serif;\n    font-size     : 10vmin;\n    font-style    : normal;\n    font-variant  : small-caps;\n    line-height   : 1;\n    text-align    : center;\n    color         : whitesmoke;\n    text-transform: uppercase;\n    letter-spacing: 2px;\n    color         : #fff;\n}\n\na {\n    outline: none;\n}\n'}),define("text!components/board.html",["module"],function(e){e.exports='<template ref="board"\n          touchstart.delegate="handleTouch($event)">\n    <require from="components/board.css"></require>\n    <require from="components/maze"></require>\n    <require from="components/players"></require>\n    <require from="components/win"></require>\n    <gameContainer css="transform: translate3d(${gamePosition.x}vmin, ${gamePosition.y}vmin, 0) scale(${scale})">\n        <maze></maze>\n        <players></players>\n    </gameContainer>\n    <win></win>\n\n</template>'}),define("text!reset.css",["module"],function(e){e.exports="/* http://meyerweb.com/eric/tools/css/reset/ \n   v2.0 | 20110126\n   License: none (public domain)\n*/\n\na, abbr, acronym, address, applet, article, aside, audio, b, big, blockquote, body, canvas, caption, center, cite, code, dd, del, details, dfn, div, dl, dt, em, embed, fieldset, figcaption, figure, footer, form, h1, h2, h3, h4, h5, h6, header, hgroup, html, i, iframe, img, ins, kbd, label, legend, li, mark, menu, nav, object, ol, output, p, pre, q, ruby, s, samp, section, small, span, strike, strong, sub, summary, sup, table, tbody, td, tfoot, th, thead, time, tr, tt, u, ul, var, video {\n    margin        : 0;\n    padding       : 0;\n    border        : 0;\n    font-size     : 100%;\n    font          : inherit;\n    vertical-align: baseline;\n}\n/* HTML5 display-role reset for older browsers */\narticle, aside, details, figcaption, figure, footer, header, hgroup, menu, nav, section {\n    display: block;\n}\n\nbody {\n    line-height: 1;\n}\n\nol, ul {\n    list-style: none;\n}\n\nblockquote, q {\n    quotes: none;\n}\n\nblockquote:after, blockquote:before, q:after, q:before {\n    content: '';\n    content: none;\n}\n\ntable {\n    border-collapse: collapse;\n    border-spacing : 0;\n}\n"}),define("text!components/maze.html",["module"],function(e){e.exports='<template>\n    <require from="components/maze.css"></require>\n    <div class="row"\n         repeat.for="row of cells">\n        <div class="cell"\n             class.bind="wallClass(cell)"\n             repeat.for="cell of row">\n        </div>\n    </div>\n</template>'}),define("text!components/board.css",["module"],function(e){e.exports="board {\n    position          : relative;\n    width             : 80vmin;\n    height            : 80vmin;\n    margin            : 1vmin;\n    overflow          : hidden;\n    -webkit-box-shadow: inset 0 0 10px 0 rgba(0,0,0,.9);\n    box-shadow        : inset 0 0 10px 0 rgba(0,0,0,.9);\n    background-color  : rgba(255,255,255,0.5);\n    border            : 3vmin solid rgba(0,0,0,0);\n    pointer-events    : auto;\n}\n\ngameContainer {\n    width           : 128vmin;\n    height          : 128vmin;\n    box-sizing      : border-box;\n    position        : absolute;\n    left            : 0;\n    top             : 0;\n    transform-origin: 0 0 0;\n    transition      : transform 2s ease-in-out;\n    transition-delay: 100;\n    border          : 2px solid #333;\n}\n"}),define("text!components/players.html",["module"],function(e){e.exports='<template>\n    <require from="components/players.css"></require>\n    <player repeat.for="player of players"\n            class="${player.name} ${player.step ? \'step\' : \'noStep\'} ${lastDirection}"\n            css="transform: translate3d(${player.x*6.4}vmin, ${player.y*6.4}vmin, 0) rotate(${player.angle}deg)"></player>\n</template>'}),define("text!components/maze.css",["module"],function(e){e.exports="maze {\n    width         : 100%;\n    height        : 100%;\n    position      : absolute;\n    top           : 0;\n    display       : flex;\n    flex-direction: column;\n}\n\n.row {\n    display       : flex;\n    flex-direction: row;\n    flex          : 1 0 auto;\n}\n\n.cell {\n    flex    : 1 0 auto;\n    position: relative;\n    border  : 4px dashed rgba(96,52,24,0.7);\n    margin  : -2px;\n}\n\n.cell::before {\n    content     : '';\n    position    : absolute;\n    top         : -4px;\n    left        : -4px;\n    z-index     : -1;\n    width       : 100%;\n    height      : 100%;\n    border      : 4px solid transparent;\n    opacity     : .4;\n    border-color: inherit;\n}\n\n.wall0000 {\n    border-color: transparent transparent transparent transparent;\n}\n\n.wall0001 {\n    border-color: transparent transparent transparent rgba(96,52,24,0.7);\n}\n\n.wall0010 {\n    border-color: transparent transparent rgba(96,52,24,0.7) transparent;\n}\n\n.wall0011 {\n    border-color: transparent transparent rgba(96,52,24,0.7) rgba(96,52,24,0.7);\n}\n\n.wall0100 {\n    border-color: transparent rgba(96,52,24,0.7) transparent transparent;\n}\n\n.wall0101 {\n    border-color: transparent rgba(96,52,24,0.7) transparent rgba(96,52,24,0.7);\n}\n\n.wall0110 {\n    border-color: transparent rgba(96,52,24,0.7) rgba(96,52,24,0.7) transparent;\n}\n\n.wall0111 {\n    border-color: transparent rgba(96,52,24,0.7) rgba(96,52,24,0.7) rgba(96,52,24,0.7);\n}\n\n.wall1000 {\n    border-color: rgba(96,52,24,0.7) transparent transparent transparent;\n}\n\n.wall1001 {\n    border-color: rgba(96,52,24,0.7) transparent transparent rgba(96,52,24,0.7);\n}\n\n.wall1010 {\n    border-color: rgba(96,52,24,0.7) transparent rgba(96,52,24,0.7) transparent;\n}\n\n.wall1011 {\n    border-color: rgba(96,52,24,0.7) transparent rgba(96,52,24,0.7) rgba(96,52,24,0.7);\n}\n\n.wall1100 {\n    border-color: rgba(96,52,24,0.7) rgba(96,52,24,0.7) transparent transparent;\n}\n\n.wall1101 {\n    border-color: rgba(96,52,24,0.7) rgba(96,52,24,0.7) transparent rgba(96,52,24,0.7);\n}\n\n.wall1110 {\n    border-color: rgba(96,52,24,0.7) rgba(96,52,24,0.7) rgba(96,52,24,0.7) transparent;\n}\n\n.wall1111 {\n    border-color: rgba(96,52,24,0.7) rgba(96,52,24,0.7) rgba(96,52,24,0.7) rgba(96,52,24,0.7);\n}\n"}),define("text!components/win.html",["module"],function(e){e.exports='<template class="${showWin ? \'show\' : \'\'}">\n    <require from="components/win.css"></require>\n    <h2>Yo!<br>you<br>did it!<br>\n        <a href="javascript:void(0);"\n           click.delegate="restart()"\n           touchstart.delegate="restart()">Again?</a>\n    </h2>\n</template>'}),define("text!components/players.css",["module"],function(e){e.exports='players {\n    display : block;\n    position: relative;\n    top     : 0;\n    width   : 100%;\n    height  : 100%;\n}\n\nplayer {\n    position         : absolute;\n    left             : .3vmin;\n    top              : .3vmin;\n    width            : 5.5vmin;\n    height           : 5.5vmin;\n    border-radius    : 3vmin;\n    box-sizing       : border-box;\n    transition       : transform .2s ease-in-out;\n    background-image : url("../img/smileys.png");\n    background-repeat: no-repeat;\n    background-size  : 200%;\n}\n\nplayer.black {\n    background-position: 0 0;\n    background-color   : crimson;\n    box-shadow         : 0 0 7px 0 rgba(0, 0, 0, 1), inset 0 0 15px 0 rgba(0,0,0, 0.7);\n}\n\nplayer.black.step {\n    background-position: 100% 0;\n}\n\nplayer.white {\n    background-position: 0 100%;\n    background-color   : darkgreen;\n    box-shadow         : 0 0 7px 0 rgba(0, 0, 0, 1), inset 0 0 15px 0 rgba(0, 0, 0, 0.5);\n}\n\nplayer.white.step {\n    background-position: 100% 100%;\n}\n\nplayer.up {\n    -webkit-transform: rotate(-90deg);\n    -ms-transform    : rotate(-90deg);\n    transform        : rotate(-90deg);\n}\n\nplayer.right {\n    -webkit-transform: rotate(0);\n    -ms-transform    : rotate(0);\n    transform        : rotate(0);\n}\n\nplayer.down {\n    -webkit-transform: rotate(90deg);\n    -ms-transform    : rotate(90deg);\n    transform        : rotate(90deg);\n}\n\nplayer.left {\n    -webkit-transform: rotate(180deg);\n    -ms-transform    : rotate(180deg);\n    transform        : rotate(180deg);\n}\n'}),define("text!components/win.css",["module"],function(e){e.exports='win {\n    display                    : flex;\n    justify-content            : center;\n    align-items                : center;\n    height                     : 100%;\n    background-color           : rgba(0, 0, 0, .8);\n    opacity                    : 0;\n    transition                 : opacity .5s ease-out;\n    -webkit-transform          : translateZ(0);\n    -webkit-perspective        : 1000;\n    -webkit-backface-visibility: hidden;\n}\n\nwin h2 {\n    font-family                : "Cabin Sketch", sans-serif;\n    font-size                  : 15vmin;\n    font-style                 : normal;\n    font-variant               : small-caps;\n    line-height                : 10vmin;\n    text-align                 : center;\n    color                      : whitesmoke;\n    padding-top                : 5vmin;\n    transform                  : scale(0.0001);\n    transition                 : transform .5s ease-out;\n    -webkit-transform          : translateZ(0);\n    -webkit-perspective        : 1000;\n    -webkit-backface-visibility: hidden;\n}\n\nwin h2 a {\n    font-size      : 10vmin;\n    color          : whitesmoke;\n    cursor         : pointer;\n    text-decoration: none;\n    margin-top     : 10vmin;\n}\n\nwin.show {\n    opacity: 1;\n}\n\nwin.show h2 {\n    transform: scale(1);\n}\n\nwin.show h2 a {\n    pointer-events: auto;\n}\n'});