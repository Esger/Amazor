{"version":3,"sources":["app.js","environment.js","main.js","components/board.js","components/maze.js","components/players.js","components/win.js","resources/index.js","resources/binding-behaviors/keystrokes.js","components/status.js"],"names":["App","eventAggregator","handleKeyInput","event","keycode","keyCode","which","keys","left","ea","publish","up","right","down","attached","self","$body","document","addEventListener","debug","testing","configure","Promise","config","longStackTraces","warnings","wForgottenReturn","aurelia","use","standardConfiguration","feature","developmentLogging","plugin","start","then","setRoot","BoardCustomElement","gamePosition","scale","subscribe","panZoomMaze","response","resetBoard","handleTouch","board","$","boardSize","height","clickX","clickY","layerX","layerY","offset","touch","touches","pageX","pageY","top","direction","mazeSize","minGamePosition","maxGamePosition","boardCenter","moveX","panBox","centerX","moveY","centerY","setValues","x","Math","max","min","y","wait","setTimeout","MazeCustomElement","hasWall","makeNewMaze","cells","width","wallPositions","hasOwnProperty","player","wallClass","cell","join","newMaze","totalCells","Array","unvis","i","j","currentCell","floor","random","path","visited","pot","neighbors","l","push","length","next","pop","PlayersCustomElement","maxLevel","level","resetPlayers","players","moves","initPlayers","adjustScale","publishStatus","statusUpdate","allPlayers","startPositions","angle","step","movePlayer","directions","angles","move","xy","playerIndex","findIndex","name","minX","apply","map","o","maxX","minY","maxY","panBoxPadding","bottom","size","allTogether","firstPlayer","WinCustomElement","showWin","restart","Keystrokes","myKeypressCallback","keypressInput","bind","activate","window","deactivate","removeEventListener","e","StatusCustomElement"],"mappings":"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","file":"app-bundle.js","sourcesContent":["import {\n    inject,\n    bindable\n} from 'aurelia-framework';\nimport {\n    EventAggregator\n} from 'aurelia-event-aggregator';\nimport $ from 'jquery';\n\n@inject(EventAggregator)\n\nexport class App {\n\n    constructor(eventAggregator) {\n        this.ea = eventAggregator;\n        this.keys = {\n            'left': 37,\n            'up': 38,\n            'right': 39,\n            'down': 40\n        };\n    }\n\n    handleKeyInput = (event) => {\n        var keycode = event.keyCode || event.which; // also for cross-browser compatible\n        switch (keycode) {\n            case this.keys.left:\n                this.ea.publish('keyPressed', \"left\");\n                break;\n            case this.keys.up:\n                this.ea.publish('keyPressed', \"up\");\n                break;\n            case this.keys.right:\n                this.ea.publish('keyPressed', \"right\");\n                break;\n            case this.keys.down:\n                this.ea.publish('keyPressed', \"down\");\n                break;\n            default:\n                this.ea.publish('keyPressed', \"somekey\");\n        }\n    }\n\n    attached() {\n        let self = this;\n        let $body = $('body');\n\n        document.addEventListener('keydown', self.handleKeyInput, true);\n    }\n\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","import environment from './environment';\n\n//Configure Bluebird Promises.\nPromise.config({\n  longStackTraces: environment.debug,\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","import {\n    inject,\n    bindable\n} from 'aurelia-framework';\nimport {\n    EventAggregator\n} from 'aurelia-event-aggregator';\n\n@inject(EventAggregator)\nexport class BoardCustomElement {\n\n    constructor(eventAggregator) {\n        this.ea = eventAggregator;\n        this.gamePosition = {};\n        this.scale = 1;\n        this.ea.subscribe('panZoom', response => {\n            this.panZoomMaze(response);\n        });\n        this.ea.subscribe('restart', response => {\n            this.resetBoard();\n        });\n\n    }\n\n    handleTouch(event) {\n        let board = $(this.board);\n        let boardSize = board.height();\n        var clickX, clickY;\n        if (event.layerX) {\n            clickX = event.layerX;\n            clickY = event.layerY;\n        } else {\n            let offset = board.offset();\n            let touch = event.touches[0];\n            clickX = touch.pageX - offset.left;\n            clickY = touch.pageY - offset.top;\n        }\n        let direction = 'undefined';\n        if (clickY <= clickX) {\n            if (clickY <= (boardSize - clickX)) {\n                direction = 'up';\n            } else {\n                direction = 'right';\n            }\n        } else {\n            if (clickY <= (boardSize - clickX)) {\n                direction = 'left';\n            } else {\n                direction = 'down';\n            }\n        }\n        this.ea.publish('keyPressed', direction);\n    }\n\n    panZoomMaze(response) {\n        let self = this;\n        let boardSize = 80;\n        let scale = (response.scale > 1) ? 1 : response.scale;\n        let mazeSize = 128 * scale;\n        let minGamePosition = 0;\n        let maxGamePosition = boardSize - mazeSize;\n\n        let boardCenter = 6.25 * 6.4;\n        let moveX = boardCenter - response.panBox.centerX * scale * 6.4;\n        let moveY = boardCenter - response.panBox.centerY * scale * 6.4;\n        let setValues = function () {\n            self.gamePosition.x = Math.max(Math.min(moveX, minGamePosition), maxGamePosition);\n            self.gamePosition.y = Math.max(Math.min(moveY, minGamePosition), maxGamePosition);\n            self.scale = scale;\n        };\n        let wait = setTimeout(setValues, 0);\n    }\n\n    resetBoard() {\n        this.gamePosition = {\n            x: -3,\n            y: -3\n        };\n        this.scale = 1;\n    }\n\n    attached() {\n        this.resetBoard();\n    }\n\n}\n","import {\n    inject,\n    bindable\n} from 'aurelia-framework';\nimport {\n    EventAggregator\n} from 'aurelia-event-aggregator';\n\n@inject(EventAggregator)\nexport class MazeCustomElement {\n\n    constructor(eventAggregator) {\n        this.ea = eventAggregator;\n        this.ea.subscribe('checkWall', response => {\n            if (!this.hasWall(response)) {\n                this.ea.publish('movePlayer', response);\n            }\n        });\n        this.ea.subscribe('restart', response => {\n            this.makeNewMaze();\n        });\n        this.cells = [];\n        this.width = 20;\n        this.height = 20;\n    }\n\n    hasWall(response) {\n        let wallPositions = {\n            'left': 3,\n            'right': 1,\n            'up': 0,\n            'down': 2\n        };\n        if (wallPositions.hasOwnProperty(response.direction)) {\n            return this.cells[response.player.y][response.player.x][wallPositions[response.direction]] == 1;\n        }\n    }\n\n    wallClass(cell) {\n        return 'wall' + cell.join('');\n    }\n\n    makeNewMaze() {\n        this.cells = this.newMaze(this.width, this.height);\n    }\n\n    newMaze(x, y) {\n        // Thanks to https://github.com/dstromberg2/maze-generator\n\n        // Establish variables and starting grid\n        let totalCells = x * y;\n        let cells = new Array();\n        let unvis = new Array();\n        for (let i = 0; i < y; i++) {\n            cells[i] = new Array();\n            unvis[i] = new Array();\n            for (let j = 0; j < x; j++) {\n                cells[i][j] = [1, 1, 1, 1];\n                unvis[i][j] = true;\n            }\n        }\n\n        // Set a random position to start from\n        let currentCell = [Math.floor(Math.random() * y), Math.floor(Math.random() * x)];\n        let path = [currentCell];\n        unvis[currentCell[0]][currentCell[1]] = false;\n        let visited = 1;\n\n        // Loop through all available cell positions\n        while (visited < totalCells) {\n            // Determine neighboring cells\n            let pot = [[currentCell[0] - 1, currentCell[1], 0, 2],\n            [currentCell[0], currentCell[1] + 1, 1, 3],\n            [currentCell[0] + 1, currentCell[1], 2, 0],\n            [currentCell[0], currentCell[1] - 1, 3, 1]];\n            let neighbors = new Array();\n\n            // Determine if each neighboring cell is in game grid, and whether it has already been checked\n            for (let l = 0; l < 4; l++) {\n                if (pot[l][0] > -1 && pot[l][0] < y && pot[l][1] > -1 && pot[l][1] < x && unvis[pot[l][0]][pot[l][1]]) { neighbors.push(pot[l]); }\n            }\n\n            // If at least one active neighboring cell has been found\n            if (neighbors.length) {\n                // Choose one of the neighbors at random\n                let next = neighbors[Math.floor(Math.random() * neighbors.length)];\n\n                // Remove the wall between the current cell and the chosen neighboring cell\n                cells[currentCell[0]][currentCell[1]][next[2]] = 0;\n                cells[next[0]][next[1]][next[3]] = 0;\n\n                // Mark the neighbor as visited, and set it as the current cell\n                unvis[next[0]][next[1]] = false;\n                visited++;\n                currentCell = [next[0], next[1]];\n                path.push(currentCell);\n            }\n            // Otherwise go back up a step and keep going\n            else {\n                currentCell = path.pop();\n            }\n        }\n        return cells;\n    }\n\n    attached() {\n        this.makeNewMaze();\n    }\n\n\n}\n","import {\n    inject,\n    bindable\n} from 'aurelia-framework';\nimport {\n    EventAggregator\n} from 'aurelia-event-aggregator';\n\n@inject(EventAggregator)\nexport class PlayersCustomElement {\n\n\n    constructor(eventAggregator) {\n        this.ea = eventAggregator;\n        this.maxLevel = 5;\n        this.level = 2;\n    }\n\n    resetPlayers() {\n        let self = this;\n        self.players = [];\n        self.moves = 0;\n        self.players = self.initPlayers();\n        self.adjustScale();\n    }\n\n    publishStatus() {\n        self = this;\n        let statusUpdate = {\n            'level': self.level,\n            'moves': self.moves\n        }\n        self.ea.publish('statusUpdate', statusUpdate);\n    }\n\n    initPlayers() {\n        let self = this;\n        let players = [];\n        let allPlayers = [\n            // {}, // dummy for level 0\n            { 'name': 'crimson' },\n            { 'name': 'darkgreen' },\n            { 'name': 'darkorange' },\n            { 'name': 'royalblue' },\n            { 'name': 'olive' },\n            { 'name': 'gold' }\n        ];\n        let startPositions = [\n            [], [],// dummy for level 0, 1\n            [[5, 5], [13, 13]],\n            [[5, 5], [9, 9], [13, 13]],\n            [[5, 5], [13, 5], [5, 13], [13, 13]],\n            [[5, 5], [13, 5], [5, 13], [13, 13], [9, 9]],\n            [[5, 5], [9, 5], [13, 5], [5, 13], [9, 13], [13, 13]]\n        ];\n\n        for (var i = 0; i < this.level; i++) {\n            let player = allPlayers[i]\n            player.x = startPositions[self.level][i][0];\n            player.y = startPositions[self.level][i][1];\n            player.angle = 90;\n            player.step = false;\n            players.push(player);\n        };\n\n        return players;\n    }\n\n    movePlayer(response) {\n        let self = this;\n        let directions = {\n            'up': [0, -1],\n            'right': [+1, 0],\n            'down': [0, +1],\n            'left': [-1, 0]\n        };\n        let angles = {\n            'up': -90,\n            'right': 0,\n            'down': 90,\n            'left': 180\n        };\n        let move = function (xy) {\n            let playerIndex = self.players.findIndex(player => player.name == response.player.name);\n            self.players[playerIndex].x += xy[0];\n            self.players[playerIndex].y += xy[1];\n            self.players[playerIndex].step = !self.players[playerIndex].step;\n            self.players[playerIndex].angle = angles[response.direction]\n        };\n        if (directions.hasOwnProperty(response.direction)) {\n            move(directions[response.direction]);\n        }\n    }\n\n    adjustScale() {\n        let minX = Math.min.apply(Math, this.players.map(function (o) { return o.x; }));\n        let maxX = Math.max.apply(Math, this.players.map(function (o) { return o.x; }));\n        let minY = Math.min.apply(Math, this.players.map(function (o) { return o.y; }));\n        let maxY = Math.max.apply(Math, this.players.map(function (o) { return o.y; }));\n        let panBoxPadding = 3;\n        let panBox = {\n            top: 0,\n            right: 0,\n            bottom: 0,\n            left: 0,\n            width: 0,\n            height: 0,\n            centerX: 0,\n            centerY: 0,\n            size: 0\n        };\n        panBox.top = Math.max(minY - panBoxPadding, 0);\n        panBox.right = Math.min(maxX + panBoxPadding + 1, 20);\n        panBox.bottom = Math.min(maxY + panBoxPadding + 1, 20);\n        panBox.left = Math.max(minX - panBoxPadding, 0);\n\n        panBox.width = panBox.right - panBox.left;\n        panBox.height = panBox.bottom - panBox.top;\n\n        panBox.size = Math.max(panBox.width, panBox.height);\n        let scale = Math.min(12.5 / panBox.size, 1);\n\n        panBox.centerX = (panBox.right + panBox.left) / 2;\n        panBox.centerY = (panBox.bottom + panBox.top) / 2;\n\n        this.ea.publish('panZoom', { 'panBox': panBox, 'scale': scale });\n    }\n\n    allTogether() {\n        let self = this;\n        // if (!(this.moves & 1)) return true;\n        let firstPlayer = self.players[0];\n        for (let i = 1; i < self.players.length; i++) {\n            if (self.players[i].x !== firstPlayer.x) {\n                return false;\n            }\n            if (self.players[i].y !== firstPlayer.y) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    attached() {\n        let self = this;\n        self.resetPlayers();\n        self.ea.subscribe('keyPressed', response => {\n            let self = this;\n            self.moves += 1;\n            self.publishStatus();\n            for (let i = 0; i < self.players.length; i++) {\n                self.ea.publish('checkWall', { direction: response, player: self.players[i] });\n            }\n            let wait = setTimeout(function () {\n                if (self.allTogether()) {\n                    if (self.level <= self.maxLevel) {\n                        self.level += 1;\n                    }\n                    self.ea.publish('allTogether');\n                }\n                self.adjustScale();\n            }, 300);\n        });\n        self.ea.subscribe('movePlayer', response => {\n            self.movePlayer(response);\n        });\n        self.ea.subscribe('restart', response => {\n            self.resetPlayers();\n            self.publishStatus();\n        });\n        self.publishStatus();\n    }\n\n}\n","import {\n    inject,\n    bindable\n} from 'aurelia-framework';\nimport {\n    EventAggregator\n} from 'aurelia-event-aggregator';\n\n@inject(EventAggregator)\nexport class WinCustomElement {\n\n    constructor(eventAggregator) {\n        this.ea = eventAggregator;\n        this.showWin = false;\n        this.ea.subscribe('allTogether', response => {\n            this.showWin = true;\n        });\n    }\n\n    restart() {\n        this.ea.publish('restart');\n        this.showWin = false;\n    }\n\n}\n","export function configure(config) {\n  //config.globalResources([]);\n}\n","export class Keystrokes {\n    constructor() {\n        this.myKeypressCallback = this.keypressInput.bind(this);\n    }\n\n    activate() {\n        window.addEventListener('keypress', this.myKeypressCallback, false);\n    }\n\n    deactivate() {\n        window.removeEventListener('keypress', this.myKeypressCallback);\n    }\n\n    // This function is called by the aliased method\n    keypressInput(e) {\n        // console.log(e);\n    }\n}\n","import {\n    inject,\n    bindable\n} from 'aurelia-framework';\nimport {\n    EventAggregator\n} from 'aurelia-event-aggregator';\n\n@inject(EventAggregator)\nexport class StatusCustomElement {\n\n    constructor(eventAggregator) {\n        this.ea = eventAggregator;\n        this.level = 0;\n        this.moves = 0;\n    }\n\n    attached() {\n        this.ea.subscribe('statusUpdate', response => {\n            this.level = response.level;\n            this.moves = response.moves;\n        });\n    }\n}\n"],"sourceRoot":"../src"}